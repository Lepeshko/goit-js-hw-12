{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Файл pixabay-api.js\n\nimport axios from 'axios';\n\nconst API_KEY = '44048092-3090edf6b3c3e0216bf005362';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nclass PixabayAPI {\n  constructor() {\n    if (!PixabayAPI.instance) {\n      this.apiKey = API_KEY;\n      this.baseUrl = BASE_URL;\n      PixabayAPI.instance = this;\n    }\n    return PixabayAPI.instance;\n  }\n\n  async fetchImages(query, page = 1, perPage = 15) {\n    try {\n      const response = await axios.get(this.baseUrl, {\n        params: {\n          key: this.apiKey,\n          q: query,\n          image_type: 'photo',\n          per_page: perPage,\n          page: page,\n        },\n      });\n      return response.data;\n    } catch (error) {\n      throw new Error('Failed to fetch images. Please try again later.');\n    }\n  }\n}\n\nconst pixabayAPI = new PixabayAPI();\nexport const fetchImages = pixabayAPI.fetchImages.bind(pixabayAPI);\n","// Файл render-functions.js\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function displayImages(images, gallery) {\n  const markup = images\n    .map(\n      image => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <div class=\"full-image\" class=\"loader\">\n                    <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                    <ul class=\"image-button\">\n                        <li><p class=\"info-name\">Likes</p><p>${image.likes}</p></li>\n                        <li><p class=\"info-name\">Views</p><p>${image.views}</p></li>\n                        <li><p class=\"info-name\">Comments</p><p>${image.comments}</p></li>\n                        <li><p class=\"info-name\">Downloads</p><p>${image.downloads}</p></li>\n                    </ul>\n                </div>\n            </a>\n        </li>\n      `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nexport function displayToast(message, type) {\n  iziToast[type]({\n    message,\n    messageColor: 'white',\n    position: 'bottomRight', // Для місцерозташування вспливаючого вікна. Можна використовувати 'bottomRight', 'bottomLeft' або 'bottomCenter'\n    backgroundColor: 'red',\n  });\n}\n","// Файл main.js\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { displayImages, displayToast } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-button');\n\nclass ImageSearchApp {\n  constructor() {\n    this.page = 1;\n    this.perPage = 15;\n    this.searchData = '';\n    this.totalHits = 0;\n\n    searchForm.addEventListener('submit', this.handleSearch.bind(this));\n    loadButton.addEventListener('click', this.loadMoreImages.bind(this));\n\n    loadButton.classList.add('is-hidden');\n    loader.classList.add('is-hidden');\n  }\n\n  async handleSearch(event) {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    this.page = 1;\n    this.searchData = event.target.elements.search_input.value.trim();\n\n    if (this.searchData === '') {\n      displayToast('Please enter a search term.', 'warning');\n      return;\n    }\n\n    loader.classList.remove('is-hidden');\n    loadButton.classList.add('is-hidden');\n\n    try {\n      const images = await fetchImages(\n        this.searchData,\n        this.page,\n        this.perPage\n      );\n      loader.classList.add('is-hidden');\n      this.totalHits = images.totalHits;\n\n      if (images.totalHits === 0) {\n        displayToast(\n          'Sorry, there are no images matching your search query. Please try again!',\n          'error'\n        );\n        return;\n      }\n\n      displayImages(images.hits, gallery);\n\n      if (images.totalHits > this.perPage) {\n        loadButton.classList.remove('is-hidden');\n      } else {\n        loadButton.classList.add('is-hidden');\n      }\n    } catch (error) {\n      loader.classList.add('is-hidden');\n      displayToast(\n        'An error occurred while fetching images. Please try again later.',\n        'error'\n      );\n    } finally {\n      event.target.reset();\n    }\n  }\n\n  async loadMoreImages() {\n    try {\n      this.page += 1;\n      loader.classList.remove('is-hidden');\n      loadButton.classList.add('is-hidden');\n\n      const images = await fetchImages(\n        this.searchData,\n        this.page,\n        this.perPage\n      );\n      loader.classList.add('is-hidden');\n\n      if (images.hits.length === 0) {\n        displayToast('No more images to load.', 'info');\n        loadButton.classList.add('is-hidden');\n        return;\n      }\n\n      displayImages(images.hits, gallery);\n\n      if (this.page * this.perPage >= this.totalHits) {\n        loadButton.classList.add('is-hidden');\n        displayToast('You have reached the end of the search results.', 'info');\n      } else {\n        loadButton.classList.remove('is-hidden');\n      }\n\n      this.smoothScroll();\n    } catch (error) {\n      loader.classList.add('is-hidden');\n      displayToast(\n        'An error occurred while fetching images. Please try again later.',\n        'error'\n      );\n    }\n  }\n\n  smoothScroll() {\n    const { height: cardHeight } =\n      gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nnew ImageSearchApp();\n"],"names":["API_KEY","BASE_URL","PixabayAPI","query","page","perPage","axios","pixabayAPI","fetchImages","displayImages","images","gallery","markup","image","SimpleLightbox","displayToast","message","type","iziToast","searchForm","loader","loadButton","ImageSearchApp","event","cardHeight"],"mappings":"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"}